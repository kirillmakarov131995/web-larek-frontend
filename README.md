# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack
Архитектруа: MVP + Eventer

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/components/common/ - папка с самостоятельным классами которые наследуются от классов в папке выше
- src/components/models/ - папка с моделями данных
- src/components/models/base/ - папка с начальными классами модели данных
- src/components/presenter/ - папка с презентором
- src/components/view/ - папка с представлениями и самими компонентами
- src/components/view/base/ - папка с основными родительскими классами View Компонентов
- src/components/view/pages/ - папка с классами для страниц сайта

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Класс Model

Используется для хранения и работы с данными, является абстрактным классом для дальнейшего наследования от него

## Класс View => Component

Отвечает за отображение пользовательского интерфейса, и является начальной/входной точкой в приложении (MPV архитектуры)

## Класс AppPresenter

Является посредником между классами: Model и View, отвечает за работу приложения

Свойства класса:

- debugMode: boolean - харнит в себе статус режима дебагинга приложения

## Класс Api

Содержит в себе основные методы CRUD Api

## Класс Events

Используется чтобы создавать/подписываться на события и как-то на них реагировать в зависимости от того, где они прослушиваются

## Класс AppApi

Класс отнаследованный от класса Api, в себе содержит методы нужные для работы с api backend'а

## Класс AppModel

Класс типа facad для соединения всех моделей приложения и удобной работы с ними

enum EModalType - используется для хранения типа открытого модального окна в приложении для его отслеживания

## Класс BasketModel

Модель с данными корзины и данных о заказе

Свойства класса:

- addedItems - добавленные в корзину id товаров типа string
- orderInfo - объект с информацией о текущем заказе типа IBasketOrderInfo
- formErrors - объект с описание ошибок валидации типа FormErrors

Методы класса:

- clearOrderInfo - очищение данных о текущем заказе
- clearBasket - очищение корзины
- getBasketCount - метод возвращет количество добаленных товаров в корзину типа Number
- deleteBasketItem - удалить товар из корзину по id типа string, если операция успешна возвращает boolean
- getOrderData - возвращет готовый объект заказа типа IOrderDataRespone с фильтрованной информацией о заказе, метод имеет параметры ids типа string[] (id товаров) и total типа number (общая сумма товаров)
- getBasketItems - получить id типа string[] товаров в корзине
- addItemBasket - добавить id товара в корзину, если товар добавлен успешно возвращает boolean статус операции
- setOrderData - устанавливает свойства типа :IBasketOrderInfo заказа в объект 'orderInfo' класса, первый параметр 'form' типа :string используется для передачи названия формы инициатора дальше по цепочке в EventEmitter
- isItemAdded - проверяет добавлен ли id типа :string товара в корзину, возвращает результат boolean
- validateOrderData - проверяет данные формы на соответствие с требованиями, formName: string - название формы, data: Partial<IBasketOrderInfo> - данные, возвращает объект типа IValidateFormOrderData - содержит название формы и успешность валидации типа boolean

## Класс ItemsModel

Модель с данными о товаре/items которые нужны для работы приложения

Свойства класса:

- items - массив данных товаров полученных с endpoint api типа IItem
- selectedItem - хранит в себе выбранный товар для предпросмотра в модальном окне типа IItem

Методы класса:

- getItemsFromId(ids: string[]): IItem[] - находит items с id переданными в аргументе метода и возвращает массив с найденными items
- getTotalSumItems(ids: string[]): number - находит items с указанными ids и возвращает подсчет суммы всех items
- setItems(items: IItem[]): void - устанавливает в свойство 'items' переданные items из аргумента метода
- getItemIdsWithPrice(ids: string[]): string[]; - находит items с указанными ids, где цена не равна 0 и возвращает их id массивом
- setSelectedItem(item: IItem | string): boolean; - устанавливает в свойство 'selectedItem' товар который сейчас просматривается пользователем

## Класс Form

Класс типа View работающий с формами на сайте, отвечает за отрисовку форм

## Класс Modal

Класс типа View отвечает за отрисовку модального окна в пользовательском интерфейсе

## Класс ContactsForm

Класс типа View отнаследованный от класса Form, отвечает за отрисовку шаблона формы с id="contacts" в html

## Класс OrderForm

Класс типа View отнаследованный от класса Form, отвечает за отрисовку шаблона формы с id="order" в html

## Класс Page

Класс типа View, отвечает за работу с основной разметкой страницы

## Класс Basket

Класс типа View, шаблон корзины basket, класс используется для работы с корзиной

## Класс Cards

Класс типа View, работает с шаблонами разметки: card-basket, card-preview, card-catalog, отвечает за визуальную составляющую карточек товара

enum ECardType - используется для определения типа карточки товара, передается при создании экземпляра класса

## Класс Success

Класс типа View, работает с шаблоном success, содержимое для модального окна для отображения успеха операции отправки данных на свервер
